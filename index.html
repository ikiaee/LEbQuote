<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn English by Quote and Wisdom</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <a href="/" class="nav-logo">LEbQuote</a>
        <button class="nav-toggle">☰</button>
        <div class="nav-links">
            <a href="/">Home</a>
            <a href="/posts">Archive</a>
            <button class="theme-toggle" id="themeToggle">
                <span class="theme-switch">
                    <input type="checkbox">
                    <span class="slider"></span>
                </span>
            </button>
        </div>
    </nav>

    <div class="container">
        <header>
            <h1>Learn English by Quote and Wisdom</h1>
        </header>

        <main>
            <section class="post-list">
                <h2>All Posts</h2>
                <ul id="postList">
                    <!-- Posts will be inserted here by JavaScript -->
                </ul>
            </section>
        </main>

        <footer>
            <p>© <span id="currentYear"></span> Learn English by Quote and Wisdom</p>
        </footer>
    </div>

    <script>
        // Dynamically load posts
        document.addEventListener("DOMContentLoaded", function() {
            // Set current year
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // Load post list
            fetchPosts();
            
            // Mobile menu toggle
            document.querySelector('.nav-toggle').addEventListener('click', () => {
                document.querySelector('.nav-links').classList.toggle('active');
            });

            // Dark mode toggle
            const themeToggle = document.getElementById('themeToggle');
            themeToggle.addEventListener('click', () => {
                document.documentElement.setAttribute('data-theme', 
                    document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
            });
        });

        async function fetchPosts() {
            try {
                const response = await fetch('posts/');
                if (!response.ok) throw new Error('Could not fetch posts');
                
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const links = doc.querySelectorAll('a[href$=".html"]');
                
                const postList = document.getElementById('postList');
                postList.innerHTML = '';
                
                links.forEach(link => {
                    const li = document.createElement('li');
                    const fileName = link.href.split('/').pop();
                    const displayName = fileName
                        .replace('.html', '')
                        .replace('_', ' at ');
                    li.innerHTML = `<a href="posts/${fileName}">${displayName}</a>`;
                    postList.appendChild(li);
                });
            } catch (error) {
                console.error('Error loading posts:', error);
                document.getElementById('postList').innerHTML = 
                    '<li>Error loading posts. Please refresh the page.</li>';
            }
        }
    </script>
</body>
</html>
